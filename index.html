<!DOCTYPE html>
<html>

<head>
    <script type="application/javascript" src="delaunay.js"></script>

    <script>
        window.onload = function() {
            var canvas = document.createElement('canvas');
            canvas.width = 500;
            canvas.height = 500;
            document.body.appendChild(canvas);
            var ctx = canvas.getContext("2d");

            var pts = [];
            for (var i = /*Math.floor(Math.random() * 100 + 100)*/ 1000; i >= 0; i--) {
                pts.push({x: 5 + Math.ceil(Math.random() * 490), y: 5 + Math.ceil(Math.random() * 490)});
                console.log(pts[pts.length - 1])
            }

//            pts.push({x: 288.7020377011756, y: 459.0411393167253});
//            pts.push({x: 320.00229927254173, y: 133.09176145296345});
//            pts.push({x: 334.260775171976, y: 342.3228053742814});
//            pts.push({x: 455.92018420781744, y: 248.96081128188553});
//            pts.push({x: 342.30806318880326, y: 338.21910826748257});
//            pts.push({x: 309.54136543023935, y: 164.19953352250644});

//            pts.push({x: 10, y: 400});
//            pts.push({x: 60, y:250});
//            pts.push({x: 180, y:30});
//            pts.push({x: 70, y:350});
//            pts.push({x: 450, y:490});
//            pts.push({x: 450, y:12});
//            pts.push({x: 300, y:75});
//            pts.push({x: 45, y:257});
//            pts.push({x: 153, y:453});
//            pts.push({x: 250, y:250});

            ctx.fillStyle="#000";
            for (i = 0; i < pts.length; i++)
                ctx.fillRect(pts[i].x - 2, 500 - 2 -  pts[i].y, 5, 5);

            var d = new Delaunay(pts);
            var triangles = d.triangulate();

            console.log(triangles);

            for (i = 0; i < triangles.length; i++) {
                ctx.beginPath();
                ctx.moveTo(triangles[i].orig.x, 500 - triangles[i].orig.y);
                ctx.lineTo(triangles[i].sym.orig.x, 500 - triangles[i].sym.orig.y);
                ctx.stroke();

//                ctx.strokeStyle="#ccc";
//                var circumcircle = d._getCircumcircle(pts[triangles[i][0]], pts[triangles[i][1]], pts[triangles[i][2]]);
//                ctx.beginPath();
//                ctx.arc(circumcircle.center[0],500-circumcircle.center[1],Math.sqrt(circumcircle.radiusSquared),0,2*Math.PI);
//                ctx.stroke();
//                ctx.strokeStyle="#000";
            }

        }

    </script>
</head>

<body>
</body>
</html>